<!DOCTYPE html>
<html lang="{{ preferences.language }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if preferences.language == 'en' %}Personalized News{% else %}–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏{% endif %}</title>
    <link rel="stylesheet" href="/static/css/style.css">
    {% if preferences.theme == 'dark' %}
    <link rel="stylesheet" href="/static/css/theme-dark.css">
    {% endif %}
</head>
<body>
    <div class="container">
        <header>
            <h1>üì∞ {% if preferences.language == 'en' %}Personalized News{% else %}–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏{% endif %}</h1>
            <p>{% if preferences.language == 'en' %}Customize your news feed{% else %}–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ—é –ª–µ–Ω—Ç—É –Ω–æ–≤–æ—Å—Ç–µ–π{% endif %}</p>
        </header>

        <main>
            <section class="preferences-form">
                <h2>{% if preferences.language == 'en' %}News Settings{% else %}–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π{% endif %}</h2>
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label>{% if preferences.language == 'en' %}Select news categories{% else %}–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π{% endif %}:</label>
                        <div class="categories-list">
                            {% for category in categories %}
                            <label class="checkbox-label">
                                <input type="checkbox" name="categories" value="{{ category.code }}" 
                                       {% if category.checked %}checked{% endif %}>
                                {% if preferences.language == 'en' %}{{ category.name_en }}{% else %}{{ category.name_ru }}{% endif %}
                            </label>
                            {% endfor %}
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>{% if preferences.language == 'en' %}Interface language{% else %}–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞{% endif %}</label>
                        <select name="language">
                            <option value="ru" {% if preferences.language == 'ru' %}selected{% endif %}>–†—É—Å—Å–∫–∏–π</option>
                            <option value="en" {% if preferences.language == 'en' %}selected{% endif %}>English</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>{% if preferences.language == 'en' %}Theme{% else %}–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è{% endif %}</label>
                        <select name="theme">
                            <option value="light" {% if preferences.theme == 'light' %}selected{% endif %}>
                                {% if preferences.language == 'en' %}Light{% else %}–°–≤–µ—Ç–ª–∞—è{% endif %}
                            </option>
                            <option value="dark" {% if preferences.theme == 'dark' %}selected{% endif %}>
                                {% if preferences.language == 'en' %}Dark{% else %}–¢–µ–º–Ω–∞—è{% endif %}
                            </option>
                        </select>
                    </div>
                    
                    <button type="submit">{% if preferences.language == 'en' %}Save settings{% else %}–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏{% endif %}</button>
                    <a href="?reset=true" class="reset-button">
                        {% if preferences.language == 'en' %}Reset settings{% else %}–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏{% endif %}
                    </a>
                </form>
            </section>

            <section class="news-feed">
                <h2>
                    {% if preferences.language == 'en' %}Your news feed{% else %}–í–∞—à–∞ –ª–µ–Ω—Ç–∞ –Ω–æ–≤–æ—Å—Ç–µ–π{% endif %} 
                    ({{ news_items|length }} {% if preferences.language == 'en' %}news{% else %}–Ω–æ–≤–æ—Å—Ç–µ–π{% endif %})
                </h2>
                
                <div class="news-grid">
                    {% for news in news_items %}
                    <div class="news-card">
                        <div class="news-image">
                            <img src="/static/images/{{ news.image }}" alt="{{ news.title }}" 
                                 onerror="this.src='/static/images/default-news.jpg'">
                        </div>
                        <div class="news-content">
                            <h3>{{ news.title }}</h3>
                            <p class="news-date">üìÖ {% if preferences.language == 'en' %}Date{% else %}–î–∞—Ç–∞{% endif %}: {{ news.date }}</p>
                            <p class="news-category">üè∑Ô∏è {% if preferences.language == 'en' %}Category{% else %}–ö–∞—Ç–µ–≥–æ—Ä–∏—è{% endif %}: {{ news.category }}</p>
                            <p class="news-excerpt">{{ news.content }}</p>
                            <a href="#" class="read-more">
                                {% if preferences.language == 'en' %}Read more ‚Üí{% else %}–ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ ‚Üí{% endif %}
                            </a>
                        </div>
                    </div>
                    {% empty %}
                    <div class="no-news">
                        <p>{% if preferences.language == 'en' %}No news found. Try changing filters.{% else %}–ù–æ–≤–æ—Å—Ç–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã.{% endif %}</p>
                    </div>
                    {% endfor %}
                </div>
            </section>

            <section class="additional-content">
                <h2>{% if preferences.language == 'en' %}About our service{% else %}–û –Ω–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ{% endif %}</h2>
                <div class="content-grid">
                    <div class="content-card">
                        <img src="/static/images/news-icon.png" alt="News" width="50">
                        <h3>{% if preferences.language == 'en' %}Latest News{% else %}–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏{% endif %}</h3>
                        <p>{% if preferences.language == 'en' %}Fresh and verified news from reliable sources{% else %}–í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏{% endif %}</p>
                    </div>
                    <div class="content-card">
                        <img src="/static/images/personalization-icon.png" alt="Personalization" width="50">
                        <h3>{% if preferences.language == 'en' %}Individual Approach{% else %}–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥{% endif %}</h3>
                        <p>{% if preferences.language == 'en' %}Only news that interests you{% else %}–¢–æ–ª—å–∫–æ —Ç–µ –Ω–æ–≤–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã –≤–∞–º{% endif %}</p>
                    </div>
                    <div class="content-card">
                        <img src="/static/images/security-icon.png" alt="Security" width="50">
                        <h3>{% if preferences.language == 'en' %}Privacy{% else %}–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å{% endif %}</h3>
                        <p>{% if preferences.language == 'en' %}Your preferences are stored locally{% else %}–í–∞—à–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ{% endif %}</p>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>¬© 2025 {% if preferences.language == 'en' %}Personalized News{% else %}–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏{% endif %}</p>
        </footer>
    </div>
</body>
</html>